<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>News Verifier</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: #f7f7fb; }
    .badge-real { background: #d1f7d9; color: #115c2a; }
    .badge-fake { background: #ffd6d6; color: #7a0a0a; }
    .badge-unv  { background: #fff0c2; color: #6b5200; }
    .small-muted { color: #667085; font-size: 0.9rem; }
    .src-card { border-left: 4px solid #e5e7eb; padding-left: 12px; margin-bottom: 8px; }
  </style>
</head>
<body>
<div class="container py-5">
  <h2 class="mb-3 text-center">ðŸ“° News Verifier</h2>
  <p class="text-center small-muted mb-4">Paste a URL, headline, or news snippet. If a URL shows as fake, try using the news title for confirmation, and vice versa.</p>

  <form method="POST" class="mb-4">
    <div class="input-group">
      <input type="text" class="form-control" name="news" placeholder="Enter news URL or text..." required>
      <button class="btn btn-primary" type="submit">Check</button>
    </div>
  </form>

  {% if result %}
  <div class="card shadow-sm">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <div class="small-muted">Input</div>
          <div class="fw-semibold">{{ result.input }}</div>
        </div>
        <div class="text-end">
          <div class="small-muted">Checked at</div>
          <div>{{ result.checked_at }}</div>
        </div>
      </div>
      <hr>

      <div class="d-flex align-items-center gap-3">
        {% if result.verdict == "REAL" %}
          <span class="badge badge-real px-3 py-2">REAL</span>
        {% elif result.verdict == "FAKE" %}
          <span class="badge badge-fake px-3 py-2">FAKE</span>
        {% else %}
          <span class="badge badge-unv px-3 py-2">UNVERIFIED</span>
        {% endif %}
        <div class="fs-5">Confidence: <strong>{{ result.confidence }}%</strong></div>
      </div>

      <div class="mt-3 small-muted">
        Signals used: {{ result.used | join(", ") }}
      </div>

      {% if result.fact_sources and result.verdict == "FAKE" %}
      <div class="mt-4">
        <h6>Debunked by (fact-check):</h6>
        {% for s in result.fact_sources %}
          <div class="src-card">
            <div class="fw-semibold"><a href="{{ s.url }}" target="_blank">{{ s.title }}</a></div>
            <div class="text-muted">{{ s.source }}</div>
          </div>
        {% endfor %}
      </div>
      {% endif %}

      {% if result.sources and result.verdict != "FAKE" %}
      <div class="mt-4">
        <h6>Covered by credible outlets:</h6>
        {% for s in result.sources %}
          <div class="src-card">
            <div class="fw-semibold"><a href="{{ s.url }}" target="_blank">{{ s.title }}</a></div>
            <div class="text-muted">{{ s.source }}</div>
          </div>
        {% endfor %}
      </div>
      {% endif %}

      {% if not result.sources and not result.fact_sources %}
      <div class="mt-4 text-muted">
        No credible matches or fact-checks were found. Consider rephrasing your query or providing a direct article URL.
      </div>
      {% endif %}
    </div>
  </div>
  {% endif %}
</div>
</body>
</html>
